<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ice.dao.DiaryDao">
   <select id="diaryList" parameterType="map" resultType="hashmap">
   	select * from diary
   </select>
   <insert id="diaryInsertAction" parameterType="map">
   	insert into diary
   	(
   		contactNo,
   		title,
   		contents,
   		regDate
   	)
   	values
   	(
   		#{contactNo},
   		#{title},
   		#{content},
   		now()
   	)
   </insert>
   
   <insert id="imageInsertAction" parameterType="map">
   	insert into images
   	(
   		type,
   		contactNo,
   		readNo,
   		realNm,
   		virtualNm,
   		regDate
   	)
   	values
   	(
   		#{type},
   		#{contactNo},
   		(SELECT no FROM diary order by no desc limit 1),
   		#{realNm},
   		#{virtualNm},
   		now()
   	)
   </insert>
</mapper>